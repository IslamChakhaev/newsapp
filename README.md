# üì∞ NewsApp ‚Äî REST API –¥–ª—è –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

##  –û–ø–∏—Å–∞–Ω–∏–µ

**NewsApp** ‚Äî —ç—Ç–æ backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Spring Boot, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–µ–µ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç—è–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö, –∑–∞—â–∏—Ç—É –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ AOP, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-  CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
-  AOP-–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏)
-  –í–∞–ª–∏–¥–∞—Ü–∏—è DTO —á–µ—Ä–µ–∑ `jakarta.validation`
-  –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∞–≤—Ç–æ—Ä–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
-  –ü–∞–≥–∏–Ω–∞—Ü–∏—è (`page`, `size`)
-  MapStruct ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É Entity –∏ DTO
-  Liquibase ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

##  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

-  Java 21
-  Spring Boot 3.5.0
-  Spring Data JPA
-  Spring Validation
-  MapStruct 1.5.3.Final
-  Liquibase
-  PostgreSQL
-  Lombok

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `controller` ‚Äî REST-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (User, News, Category, Comment)
- `service / impl` ‚Äî –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- `dto / request` ‚Äî DTO –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `dto / response` ‚Äî DTO –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç—É
- `entity` ‚Äî JPA-—Å—É—â–Ω–æ—Å—Ç–∏
- `repository / spec` ‚Äî –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ JPA-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- `mapper` ‚Äî MapStruct-–º–∞–ø–ø–µ—Ä—ã
- `aop` ‚Äî –ê—Å–ø–µ–∫—Ç—ã –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞)
- `exception` ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- `filter` ‚Äî –§–∏–ª—å—Ç—Ä—ã (API-–∫–ª—é—á –∏ X-User-Id)
- `interceptors` ‚Äî –ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∏ (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤)
- `scopes` ‚Äî RequestScope –±–∏–Ω `AuthenticatedUser`

---

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (Requirements)

- Java 21 (JDK)
- Gradle —Å Kotlin DSL
- PostgreSQL 14+
- Docker –∏ Docker Compose
- IDE —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Spring Boot (–Ω–∞–ø—Ä–∏–º–µ—Ä, IntelliJ IDEA)

---

##  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (Setup & Run)

### 1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL —á–µ—Ä–µ–∑ Docker

```bash
   docker-compose -f docker/docker-compose.yml up -d
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –±–∞–∑—É `newsdb` —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `islam` –∏ –ø–∞—Ä–æ–ª–µ–º `1111` –Ω–∞ –ø–æ—Ä—Ç—É `5433`.

### 2. ‚öôÔ∏è –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
   ./gradlew bootRun
```

–ò–ª–∏ —á–µ—Ä–µ–∑ IDE ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç–µ `NewsappApplication`

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8080/api](http://localhost:8080/api)

---

## üõ†Ô∏è Liquibase (Database Migration)

Liquibase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

Changelog-—Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ –ø—É—Ç–∏:

```
src/main/resources/db/changelog/db.changelog-master.yaml
```

---

##  –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ (Endpoints)
| –†–µ—Å—É—Ä—Å       | HTTP     | –ü—É—Ç—å                               | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| ------------ | -------- | ---------------------------------- | ------------------------------ |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** | `GET`    | `/api/users?page=0&size=10`        | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  |
|              | `POST`   | `/api/users`                       | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è           |
|              | `GET`    | `/api/users/{id}`                  | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID    |
|              | `DELETE` | `/api/users/{id}`                  | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è           |
| **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**    | `GET`    | `/api/categories?page=0&size=10`   | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π      |
|              | `POST`   | `/api/categories`                  | –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é              |
|              | `GET`    | `/api/categories/{id}`             | –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ ID       |
|              | `PUT`    | `/api/categories/{id}`             | –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é             |
|              | `DELETE` | `/api/categories/{id}`             | –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é              |
| **–ù–æ–≤–æ—Å—Ç–∏**      | `GET`    | `/api/news?page=0&size=10`         | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π       |
|              | `GET`    | `/api/news?authorId=&categoryId=`  | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π            |
|              | `GET`    | `/api/news/{id}`                   | –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å –ø–æ ID         |
|              | `POST`   | `/api/news`                        | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å                |
|              | `PUT`    | `/api/news/{id}`                   | –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å               |
|              | `DELETE` | `/api/news/{id}`                   | –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å                |
| **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**  | `GET`    | `/api/news/{newsId}/comments`      | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–æ–≤–æ—Å—Ç–∏ |
|              | `POST`   | `/api/news/{newsId}/comments`      | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –Ω–æ–≤–æ—Å—Ç–∏ |
|              | `PUT`    | `/api/news/{newsId}/comments/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π           |
|              | `DELETE` | `/api/news/{newsId}/comments/{id}` | –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π            |



---

##  –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Postman

### ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ ID

```http
GET http://localhost:8080/api/news/1
```

- –ó–∞–≥–æ–ª–æ–≤–∫–∏:
    - `X-Client-Api-Key: 12345`
    - `X-User-Id: 1`

![GET /api/news/1](docs/images/get-news-by-id.png)

### üóë –£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ ID

```http
DELETE http://localhost:8080/api/news/1
```

- –ó–∞–≥–æ–ª–æ–≤–∫–∏:
    - `X-Client-Api-Key: 12345`
    - `X-User-Id: 1`

![DELETE /api/news/1](docs/images/delete-news-by-id.png)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å / –ó–∞–≥–æ–ª–æ–≤–∫–∏

| –ó–∞–≥–æ–ª–æ–≤–æ–∫           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 | –ü—Ä–∏–º–µ—Ä          |
|---------------------|--------------------------------------------|------------------|
| `X-Client-Api-Key`  | API-–∫–ª—é—á –∫–ª–∏–µ–Ω—Ç–∞ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–æ–º)    | `12345`         |
| `X-User-Id`         | ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (RequestScope –±–∏–Ω)| `1`             |

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ (—É–¥–∞–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ AOP. 

---

##  –ê–≤—Ç–æ—Ä

**Islam Chakhaev** 